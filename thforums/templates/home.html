{% extends 'layout.html' %}

{% block content %}
    <div>
        <a href="{{ url_for('new_post') }}" class="button">Create Post</a>
    </div>
    {% if posts %}
        {% for post in posts %}
            <div style="display: flex; align-items: center; margin-bottom: 20px;">
                <img src="{{ url_for('static', filename='profile_pics/' + (post.author.image_file if post.author.image_file else 'default.png')) }}" 
                     alt="Author's Profile Picture" 
                     style="width: 40px; height: 40px; border-radius: 50%; margin-right: 10px;">
                <div>
                    <h2>{{ post.title }}</h2>
                    <p><i>from {{ post.author.username }} at {{ post.date_posted.strftime('%Y-%m-%d %H:%M:%S') }}</i></p>
                    <p>{{ post.content }}</p>
                    {% if post.author == current_user %}
                        <a href="{{ url_for('edit_post', post_id=post.id) }}">Edit</a>
                        <form method="POST" action="{{ url_for('delete_post', post_id=post.id) }}" style="display:inline;">
                            <button type="submit">Delete</button>
                        </form>
                    {% endif %}
                </div>
            </div>
        {% endfor %}
    {% else %}
        <p>No posts available. Be the first to create one!</p>
    {% endif %}
{% endblock %}